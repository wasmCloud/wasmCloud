name: install Nix

inputs:
  cachixAuthToken:
    description: auth token for https://app.cachix.org/organization/wasmcloud/cache/wasmcloud

runs:
  using: composite
  steps:
    # Install Nix
    - uses: DeterminateSystems/nix-installer-action@c723f3a885e3f1d866d91f4f0c33dd44b1fc7c60
      with:
        extra-conf: |
          accept-flake-config = true

    # Setup Cachix cache
    - uses: cachix/cachix-action@0fc020193b5a1fa3ac4575aa3a7d3aa6a35435ad
      continue-on-error: true
      with:
        name: wasmcloud
        authToken: "${{ inputs.cachixAuthToken }}"
