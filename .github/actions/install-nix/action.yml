name: install Nix

inputs:
  cachixAuthToken:
    description: auth token for https://app.cachix.org/organization/wasmcloud/cache/wasmcloud

runs:
  using: composite
  steps:
    # Install Nix
    - uses: DeterminateSystems/nix-installer-action@786fff0690178f1234e4e1fe9b536e94f5433196
      with:
        extra-conf: |
          accept-flake-config = true

    # Setup Cachix cache
    - uses: cachix/cachix-action@0fc020193b5a1fa3ac4575aa3a7d3aa6a35435ad
      continue-on-error: true
      with:
        name: wasmcloud
        authToken: "${{ inputs.cachixAuthToken }}"
